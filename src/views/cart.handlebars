<div class="alert alert-dark m-2" role="alert">
    <strong>Cart ID: {{cart._id}}</strong><br>
</div>
{{#each cart.products}}
<div class="accordion m-2" id="accordionPanelsStayOpen{{product._id}}">
    <div class="accordion-item">
        <h2 class="accordion-header" id="panelsStayOpen-h{{product._id}}">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#panelsStayOpen-{{product._id}}" aria-expanded="true"
                aria-controls="panelsStayOpen-{{product._id}}">
                <strong>Product ID: {{product._id}} | {{product.title}} | Quantity: {{quantity}}</strong> 
            </button>
        </h2>
        <div id="panelsStayOpen-{{product._id}}" class="accordion-collapse collapse"
            aria-labelledby="panelsStayOpen-h{{product._id}}">
            <div class="accordion-body">
                <strong>Product ID: <a href="/products/{{product._id}}">{{product._id}}</a></strong><br>
                <strong>Quantity: {{quantity}}</strong><br>
                <strong>Title: {{product.title}}</strong><br>
                Description: {{product.description}}<br>
                Price: <code>${{product.price}}</code><br>
                Stock: <code>{{product.stock}}</code><br>
                Category: {{product.category}}<br>
            </div>
        </div>
    </div>
</div>
{{/each}}
{{#if user}}
<div class="m-2">
    <button type="submit" id="purchaseCart" class="btn btn-outline-success mb-2">
        <script>
            document.getElementById("purchaseCart").addEventListener("click", function () {
                purchaseCart();
            });
        </script>
        <img src="/images/cart-box.png" alt="eStorage Products" width="30" height="24">
        Purchase Products
    </button>
</div>
<!-- Toast -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="toastPurchaseCart" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-body">
            Cart purchase completed successfully!
        </div>
    </div>
</div>
<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="toastPurchaseCartFail" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-body">
            Cart purchase cannot be completed!
        </div>
    </div>
</div>
<script src="/js/cartManagement.js"></script>
{{/if}}